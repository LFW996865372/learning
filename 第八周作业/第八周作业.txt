20201103
1、使用ProcessOn绘制SpringMVC容器初始化过程的时序图
https://www.processon.com/diagraming/5fa7c3b87d9c081baf1da4d6

20201105
2、整理笔记，完全理解SpringMVC容器的核心原理和设计模式的应用场景。
一、SpringMVC九大组件
HandlerMappings
是用来查找Handler(Controller)的，也就是处理器，具体的表现形式可以是类也可以是方法。比如，标注了@RequestMapping的每个method都可以看成是一个Handler，由Handler来负责实际的请求处理。HandlerMapping在请求到达之后，它的作用便是找到请求相应的处理器Handler和Interceptors。

HandlerAdapters
因为SpringMVC中Handler可以是任意形式的，只要能够处理请求便行,但是把请求交给Servlet的时候，由于Servlet的方法结构都是如doService(HttpServletRequestreq,HttpServletResponseresp)这样的形式，让固定的Servlet处理方法调用Handler来进行处理，这一步工作便是HandlerAdapter要做的事。

HandlerExceptionResolvers
用来处理Handler过程中产生的异常情况的组件。具体来说，此组件的作用是根据异常设置ModelAndView,之后再交给render()方法进行渲染.

ViewResolvers
视图解析器，将String类型的视图名和Locale解析为View类型的视图。

RequestToViewNameTranslator
这个组件的作用，在于从Request中获取viewName.因为ViewResolver是根据ViewName查找View,但有的Handler处理完成之后，没有设置View也没有设置ViewName，便要通过这个组件来从Request中查找viewName。 

LocaleResolver
用于从request中解析出Locale,在中国大陆地区，Locale当然就会是zh-CN之类，用来表示一个区域。这个类也是i18n的基础。

ThemeResolver--不太常用
用来解析主题的。主题，就是样式，图片以及它们所形成的显示效果的集合。SpringMVC中一套主题对应一个properties文件，里面存放着跟当前主题相关的所有资源，如图片，css样式等。创建主题非常简单，只需准备好资源，然后新建一个"主题名.properties"并将资源设置进去，放在classpath下，便可以在页面中使用了。SpringMVC中跟主题有关的类有ThemeResolver,ThemeSource和Theme。ThemeResolver负责从request中解析出主题名，ThemeSource则根据主题名找到具体的主题，其抽象也就是Theme,通过Theme来获取主题和具体的资源。

MultipartResolver
MultipartResolver用于处理上传请求，通过将普通的Request包装成MultipartHttpServletRequest，使其拥有处理文件上传的功能。

FlashMapManager
FlashMap用于重定向Redirect时的参数数据传递，而FlashMapManager就是用来管理FlashMap的。

二、SpringMVC容器的核心原理
一切都围绕DispatcherServlet展开，分初始化与运行时调用两部分。
1、初始化的入口是DispatcherServlet.init()，实质上实现在其父类HttpServletBean中。最终都回归到IOC容器初始化的一键启动refresh()中。
容器初始化完成后，通过onRefresh()初始化九大组件。
2、运行时调用，入口为doService()，核心逻辑在中央处理器doDispatch()实现。
关键流程包括:
1）、checkMultipart检查是否是文件上传的请求
2）、getHandler获取处理当前请求的handler(实质上是HandlerExecutionChain，请求处理器链对象，该对象封装了handler和interceptors)
3）、getHandlerAdapter获取处理request的处理器适配器 
4）、applyPreHandle调用interceptor的前置处理
5）、通过处理器适配器调用实际的处理器(controller)处理请求，返回ModelAndView
6）、applyPostHandle调用interceptor的后置处理
7）、调用render()将ModelAndView渲染为View，设置到response返回
